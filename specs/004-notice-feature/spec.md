# Feature Specification: 공지사항 기능

**Feature Branch**: `004-notice-feature`
**Created**: 2026-01-27
**Status**: Draft
**Input**: User description: "reference 폴더의 task.md를 참고하여 공지사항 관련 기능을 구현하라. UI 스타일은 기존 코드와 어울리게 만들어라. supabase에 이미 테이블은 만들어두었다."

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 공지사항 목록 조회 (Priority: P1)

총판(MASTER) 또는 대행사(AGENCY) 권한을 가진 사용자가 로그인 후 사이드바의 공지사항 메뉴를 통해 공지사항 목록 페이지에 접근하여, 제목, 작성 날짜, 조회수가 표시된 공지사항 목록을 확인하고 페이지네이션을 통해 목록을 탐색할 수 있다.

**Why this priority**: 공지사항 조회는 모든 권한 있는 사용자가 사용하는 핵심 기능으로, 등록/수정/삭제 기능보다 먼저 구현되어야 한다.

**Independent Test**: 로그인 후 사이드바에서 공지사항 메뉴 클릭 → 목록 페이지 표시 → 공지사항 목록(제목, 작성일, 조회수) 확인 → 페이지네이션 동작 확인

**Acceptance Scenarios**:

1. **Given** MASTER 또는 AGENCY 사용자가 로그인한 상태에서, **When** 사이드바의 공지사항 메뉴를 클릭하면, **Then** 공지사항 목록 페이지가 표시되고 각 행에 제목, 작성 날짜(YYYY-MM-DD 형식), 조회수가 표시된다.
2. **Given** 공지사항 목록 페이지에서, **When** 페이지네이션 컨트롤을 사용하면, **Then** 해당 페이지의 공지사항 목록이 표시된다.
3. **Given** ADVERTISER 사용자가 로그인한 상태에서, **When** 사이드바를 확인하면, **Then** 공지사항 메뉴가 표시되지 않는다.

---

### User Story 2 - 공지사항 상세 조회 (Priority: P1)

MASTER 또는 AGENCY 사용자가 공지사항 목록에서 특정 공지사항을 선택하여 상세 페이지에 접근하고, 제목, 작성일자, 조회수, 본문 내용을 확인할 수 있다. 상세 페이지에서 "목록으로" 버튼을 통해 목록 페이지로 돌아갈 수 있다.

**Why this priority**: 상세 조회는 목록 조회와 함께 조회 기능의 핵심이며, 공지사항의 실제 내용을 확인하는 필수 기능이다.

**Independent Test**: 목록 페이지에서 공지사항 클릭 → 상세 페이지 표시 → 제목/작성일/조회수/본문 확인 → "목록으로" 버튼 클릭 → 목록 페이지 복귀

**Acceptance Scenarios**:

1. **Given** 공지사항 목록 페이지에서, **When** 특정 공지사항을 클릭하면, **Then** 상세 페이지로 이동하고 조회수가 1 증가한다.
2. **Given** 공지사항 상세 페이지에서, **When** 페이지 내용을 확인하면, **Then** 최상단에 "목록으로" 버튼이 있고, 그 아래에 제목, 작성일자(YYYY-MM-DD 형식), 조회수가 표시되며, 본문이 그 아래에 표시된다.
3. **Given** 공지사항 상세 페이지에서, **When** "목록으로" 버튼을 클릭하면, **Then** 공지사항 목록 페이지로 돌아간다.

---

### User Story 3 - 공지사항 등록 (Priority: P2)

MASTER 사용자가 새로운 공지사항을 작성하여 등록할 수 있다. 등록 시 제목과 본문 내용을 입력하며, 작성 날짜는 자동으로 현재 시간이 설정되고 조회수는 0으로 초기화된다.

**Why this priority**: 등록 기능은 MASTER 전용 관리 기능으로, 조회 기능 구현 후 추가한다.

**Independent Test**: MASTER로 로그인 → 등록 버튼 클릭 → 제목/본문 입력 → 저장 → 목록에 새 공지사항 표시 확인

**Acceptance Scenarios**:

1. **Given** MASTER 사용자가 공지사항 목록 페이지에 있을 때, **When** 등록 버튼을 클릭하면, **Then** 공지사항 등록 화면(모달 또는 페이지)이 표시된다.
2. **Given** 공지사항 등록 화면에서, **When** 제목과 본문을 입력하고 저장 버튼을 클릭하면, **Then** 공지사항이 저장되고 목록에 새 공지사항이 표시된다.
3. **Given** AGENCY 사용자가 공지사항 목록 페이지에 있을 때, **When** 페이지를 확인하면, **Then** 등록 버튼이 표시되지 않는다.

---

### User Story 4 - 공지사항 수정 (Priority: P2)

MASTER 사용자가 기존 공지사항의 제목과 본문을 수정할 수 있다.

**Why this priority**: 수정 기능은 등록 기능과 함께 MASTER 전용 관리 기능이다.

**Independent Test**: MASTER로 로그인 → 목록에서 공지사항 선택 → 수정 버튼 클릭 → 내용 수정 → 저장 → 변경 내용 확인

**Acceptance Scenarios**:

1. **Given** MASTER 사용자가 공지사항 상세 페이지 또는 목록에서, **When** 수정 버튼을 클릭하면, **Then** 공지사항 수정 화면이 표시되고 기존 제목과 본문이 입력란에 표시된다.
2. **Given** 공지사항 수정 화면에서, **When** 내용을 수정하고 저장 버튼을 클릭하면, **Then** 변경 사항이 저장되고 수정된 내용이 반영된다.
3. **Given** AGENCY 사용자가 공지사항 상세 페이지에 있을 때, **When** 페이지를 확인하면, **Then** 수정 버튼이 표시되지 않는다.

---

### User Story 5 - 공지사항 삭제 (Priority: P3)

MASTER 사용자가 더 이상 필요하지 않은 공지사항을 삭제할 수 있다.

**Why this priority**: 삭제 기능은 조회, 등록, 수정 기능 구현 후 추가하는 관리 기능이다.

**Independent Test**: MASTER로 로그인 → 목록에서 공지사항 선택 → 삭제 버튼 클릭 → 확인 → 목록에서 삭제 확인

**Acceptance Scenarios**:

1. **Given** MASTER 사용자가 공지사항을 삭제하려고 할 때, **When** 삭제 버튼을 클릭하면, **Then** 삭제 확인 메시지가 표시된다.
2. **Given** 삭제 확인 메시지가 표시된 상태에서, **When** 확인을 선택하면, **Then** 공지사항이 삭제되고 목록에서 제거된다.
3. **Given** AGENCY 사용자가 공지사항 목록 또는 상세 페이지에 있을 때, **When** 페이지를 확인하면, **Then** 삭제 버튼이 표시되지 않는다.

---

### Edge Cases

- 공지사항이 없는 경우 어떻게 표시되는가? → "등록된 공지사항이 없습니다" 메시지가 표시된다.
- 제목이나 본문 없이 등록하려고 하면 어떻게 되는가? → 유효성 검사 후 입력 필요 메시지가 표시된다.
- 삭제 후 해당 공지사항 상세 페이지 URL로 직접 접근하면 어떻게 되는가? → "존재하지 않는 공지사항입니다" 메시지와 함께 목록 페이지로 안내한다.
- ADVERTISER가 공지사항 URL에 직접 접근하면 어떻게 되는가? → 권한 없음 메시지 또는 리다이렉트 처리된다.

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: MASTER 또는 AGENCY 사용자가 로그인했을 때 사이드바 메뉴의 최상단에 공지사항 메뉴가 표시되어야 한다.
- **FR-002**: ADVERTISER 사용자에게는 공지사항 메뉴가 표시되지 않아야 한다.
- **FR-003**: 공지사항 목록 페이지는 각 공지사항의 제목, 작성 날짜(YYYY-MM-DD 형식), 조회수를 행 단위로 표시해야 한다.
- **FR-004**: 공지사항 목록에는 페이지네이션이 적용되어야 한다.
- **FR-005**: 공지사항 상세 페이지는 최상단에 "목록으로" 버튼을 표시해야 한다.
- **FR-006**: 공지사항 상세 페이지는 제목, 작성일자, 조회수를 상단에 표시하고 본문을 그 아래에 표시해야 한다.
- **FR-007**: 공지사항 상세 페이지 진입 시 해당 공지사항의 조회수가 1 증가해야 한다.
- **FR-008**: MASTER 사용자만 공지사항을 등록할 수 있어야 한다.
- **FR-009**: MASTER 사용자만 공지사항을 수정할 수 있어야 한다.
- **FR-010**: MASTER 사용자만 공지사항을 삭제할 수 있어야 한다.
- **FR-011**: 공지사항 등록 시 제목과 본문은 필수 입력 항목이어야 한다.
- **FR-012**: 공지사항 등록 시 작성 날짜는 자동으로 현재 시간이 설정되어야 한다.
- **FR-013**: 공지사항 등록 시 조회수는 0으로 초기화되어야 한다.

### Key Entities

- **Notice (공지사항)**: 시스템의 공지사항 정보를 저장하는 엔티티. 제목(title), 내용(content), 작성날짜(createdAt), 조회수(viewCount)를 포함한다. 테이블명: notice

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: MASTER/AGENCY 사용자가 로그인 후 2초 이내에 공지사항 목록 페이지에 접근할 수 있다.
- **SC-002**: 공지사항 목록에서 특정 공지사항 클릭 후 1초 이내에 상세 페이지가 표시된다.
- **SC-003**: MASTER 사용자가 공지사항 등록을 1분 이내에 완료할 수 있다.
- **SC-004**: 100개 이상의 공지사항이 있어도 목록 페이지가 3초 이내에 로드된다.
- **SC-005**: 권한이 없는 사용자(ADVERTISER)가 공지사항 기능에 접근하려 할 때 100% 차단된다.

## Assumptions

- Supabase에 notice 테이블이 이미 생성되어 있으며, 다음 필드를 포함한다: id(자동생성), title(text), content(text), created_at(timestamp), view_count(int4)
- 기존 프로젝트의 UI 컴포넌트(Button, Pagination, StatsCard 등)와 스타일을 재활용한다.
- 기존 인증/세션 시스템을 그대로 활용한다.
- 페이지네이션은 기존 Pagination 컴포넌트 패턴을 따른다.
- 공지사항 메뉴는 LNB(사이드바)의 메뉴 목록 최상단에 위치한다.
